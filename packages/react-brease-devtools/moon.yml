type: library

tasks:
  build:
    command:
      - tsc
      - -p
      - tsconfig.build.json
    outputs:
      - build
    inputs:
      - "@group(app)"
      - "@globs(sources)"
      - "@globs(tests)"
      - "@globs(configs)"

  build_watch:
    command:
      - tsc
      - -p
      - tsconfig.build.json
      - -w
    outputs:
      - build
    inputs:
      - "@group(app)"
      - "@globs(sources)"
      - "@globs(tests)"
      - "@globs(configs)"

  build_types:
    command:
      - cp
      - build/lib/index.d.ts
      - build/lib/index.prod.d.ts
    deps:
      - build
    inputs:
      - build/lib/index.d.ts
    options:
      mergeArgs: replace
      mergeDeps: replace
      mergeInputs: replace

  build_types_watch:
    command:
      - cp
      - build/lib/index.d.ts
      - build/lib/index.prod.d.ts
    deps:
      - build
    inputs:
      - build/lib/index.d.ts
    options:
      mergeArgs: replace
      mergeDeps: replace
      mergeInputs: replace
